<div class="evo-map">
  <agm-map [styles]="helperModel.styles" [latitude]="helperModel.latitude" [longitude]="helperModel.longitude" [zoom]="16">
    <agm-marker [latitude]="helperModel.latitude" [longitude]="helperModel.longitude">
      <agm-snazzy-info-window [maxWidth]="200" [closeWhenOthersOpen]="true">
        <ng-template>
          My first Snazzy Info Window!
        </ng-template>
      </agm-snazzy-info-window>
    </agm-marker>

      <agm-marker *ngFor="let truck of trucks" (markerClick)="showTruckInfo(this.truck)" [latitude]="convertToNumber(truck.address.lat)" [longitude]="convertToNumber(truck.address.lng)">
      </agm-marker>
  </agm-map>


  <form class="evo-map__form" (ngSubmit)="searchTrucks()">
    <div class="evo-map__form-search">
      <button class="evo-map__form-search-button clean" (click)="clearInput()">
        <i class="material-icons">close</i>
      </button>
      <google-places class="form-control" [type]="'address'" (locationData)="getAddress($event, 'where')"></google-places>
      <button class="evo-map__form-search-button speak">
        <i class="material-icons">mic_none</i>
      </button>
    </div>
    <div class="evo-map__form-request" *ngIf="!selectedTruck">
      <div class="evo-map__form-request-wrapper">
        <div class="evo-map__form-request-wrapper-space"></div>
        <button class="evo-button">Шукати</button>
        <div class="evo-map__form-request-wrapper-info">3 евакутора поруч</div>
      </div>
    </div>
  </form>

  <div class="evo-map__truck" *ngIf="selectedTruck">
    <div class="evo-map__truck-close" (click)="closeTruckInfo()">  
      <i class="material-icons">close</i>
    </div>
    <h1 class="evo-map__truck-title">{{selectedTruck.car_attributes.brand.name}} {{selectedTruck.car_attributes.model.name}}</h1>
    <h5 class="evo-map__truck-details">
      <span *ngFor="let type of selectedTruck.car_types">{{type.name}} </span>
      <span> | {{selectedTruck.passengers_count}} місць</span>
    </h5>
    <div class="flex-row center-left">
      <div class="evo-map__truck-image"><img width="100%" src="https://101clipart.com/wp-content/uploads/12/Truck%20Clipart%20Top%20View%2003.jpg" alt=""></div>
      <div class="evo-map__truck-number">{{selectedTruck.registration_number}}</div>
    </div>
    <button class="evo-button">Зателефонувати</button>
  </div>

  <div class="clearfix"></div>
</div>
