<div class="evo-preview">
    <div class="row">
        <div class="evo-preview-content">
            <div class="evo-panel-mobile-actions">
                <div class="col-xs-12 text-center evo-panel__actions-mobile">
                    <button *ngIf="isShowPersonalizeButton()"
                        class="evo-button evo-button--small"
                        [ngClass]="{ 'evo-button--default disabled': isPersonalizeDisabled(), 'evo-button--warning': !isPersonalizeDisabled() }"
                        [disabled]="isPersonalizeDisabled()"
                        (click)="navigateToPersonalize()">Personalize photos</button>

                    <button *ngIf="isShowOrderPrintsButton()"
                    class="evo-button evo-button--small"
                        [ngClass]="{ 'evo-button--default disabled': isOrderPrintsDisabled(), 'evo-button--warning': !isOrderPrintsDisabled() }"
                        [disabled]="isOrderPrintsDisabled()"
                        (click)="onOrderPrintsClick()">Order prints</button>
                </div>
            </div>
            <div class="col-xs-12 col-sm-7">

                <div class="hidden-xs">
                    <evo-preview-filters [eventOptions]="eventOptions"
                                        [studentOptions]="studentOptions"
                                        [filterKeys]="filterKeys"
                                        [selectedFiltersValues]="selectedFiltersValues"
                                        [disabled]="loading || isGuestMode || showBlankMessage"
                                        (change)="filterPhotos($event)"></evo-preview-filters>
                </div>

                <evo-loader *ngIf="loading"></evo-loader>

                <evo-blank-list-message *ngIf="showBlankMessage"
                                        [effectiveStartDate]="effectiveStartDate"></evo-blank-list-message>

                <div class="evo-preview__list-container"
                    *ngIf="!loading && !showBlankMessage">
                    <div class="evo-preview__list"
                        *ngFor="let event of groupedByEventsPhotos">
                        <div class="evo-preview__list-wrapper"
                            *ngIf="event.photos.length">
                            <h3 class="evo-preview__list-title">{{event.title}}</h3>
                            <evo-preview-list [items]="event.photos"
                                            [selectedId]="selectedPhotoCardId"></evo-preview-list>
                        </div>
                    </div>
                </div>

            </div>

            <div class="col-xs-12 col-sm-5">
                <div class="evo-preview__panel evo-panel evo-panel--center">
                    <div class="evo-panel__header">
                        <h2 class="evo-h2">Your photos</h2>
                    </div>
                    <div class="evo-panel__body">
                        <p class="evo-panel__text">
                            Select your favorite photo, personalize, order prints and pay.
                        </p>
                        <p *ngIf="freeDigitalDownloadOrderThreshold && !isGuestMode"
                        class="evo-panel__text evo-panel__text--warning">
                            Order ${{freeDigitalDownloadOrderThreshold}} or more and receive free hi-res digital downloads of your portraits.
                        </p>

                        <a class="evo-panel__events-link evo-h3"
                            [ngClass]="{'hidden': mobileShowEvents || isVenuesEmpty}"
                            (click)="mobileShowEvents = true">
                            <span>
                                Show Upcoming Events
                            </span>
                        </a>
                        <evo-venues 
                            [ngClass]="{'active': mobileShowEvents}"
                            [venuesMap]="venues"></evo-venues>

                        <div class="evo-panel__actions">
                            <button *ngIf="isShowPersonalizeButton()"
                                    [ngClass]="{ 'evo-button': true, 'evo-button--default disabled': isPersonalizeDisabled(), 'evo-button--warning': !isPersonalizeDisabled() }"
                                    [disabled]="isPersonalizeDisabled()"
                                    (click)="navigateToPersonalize()">Personalize photos</button>

                            <button *ngIf="isShowOrderPrintsButton()"
                                    [ngClass]="{ 'evo-button': true, 'evo-button--default disabled': isOrderPrintsDisabled(), 'evo-button--warning': !isOrderPrintsDisabled() }"
                                    [disabled]="isOrderPrintsDisabled()"
                                    (click)="onOrderPrintsClick()">Order prints</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>